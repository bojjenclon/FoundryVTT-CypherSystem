/*! cyphersystem v1.0.0 | (c) 2020 Cornell Daly | MIT License | https://github.com/bojjenclon/ */

!(function(){return function e(t,r,n){function a(l,o){if(!r[l]){if(!t[l]){var s="function"==typeof require&&require;if(!o&&s)return s(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[l]={exports:{}};t[l][0].call(u.exports,(function(e){return a(t[l][1][e]||e)}),u,u.exports,e,t,r,n)}return r[l].exports}for(var i="function"==typeof require&&require,l=0;l<n.length;l++)a(n[l]);return a}})()({1:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.CypherSystemActorSheet=void 0;var a=n(e("@babel/runtime/helpers/slicedToArray")),i=n(e("@babel/runtime/regenerator")),l=n(e("@babel/runtime/helpers/asyncToGenerator")),o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),c=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),f=n(e("@babel/runtime/helpers/get")),p=n(e("@babel/runtime/helpers/getPrototypeOf")),h=e("../config.js"),d=e("../rolls.js"),m=e("../item/item.js"),y=e("../utils.js"),b=n(e("../enums/enum-pool.js"));function v(e){var t=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}})();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var g=(function(e){(0,c.default)(r,e);var t=v(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).skillsPoolFilter=-1,e.skillsTrainingFilter=-1,e.selectedSkill=null,e.abilityPoolFilter=-1,e.selectedAbility=null,e}return(0,s.default)(r,[{key:"template",get:function(){return"systems/cyphersystemClean/templates/actor/pc-sheet.html"}}],[{key:"defaultOptions",get:function(){return mergeObject((0,f.default)((0,p.default)(r),"defaultOptions",this),{classes:["cyphersystem","sheet","actor"],width:672,height:600,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"description"},{navSelector:".stats-tabs",contentSelector:".stats-body",initial:"advancement"}]})}}]),(0,s.default)(r,[{key:"_generateItemData",value:function(e,t,r){var n=e.data.items;n[r]||(n[r]=n.filter((function(e){return e.type===t})))}},{key:"_filterItemData",value:function(e,t,r,n){var a=e.data.items;a[t]=a[t].filter((function(e){return(0,y.deepProp)(e.data,r)===n}))}},{key:"_skillData",value:(function(){var e=(0,l.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._generateItemData(t,"skill","skills"),t.skillsPoolFilter=this.skillsPoolFilter,t.skillsTrainingFilter=this.skillsTrainingFilter,t.skillsPoolFilter>-1&&this._filterItemData(t,"skills","pool",parseInt(t.skillsPoolFilter,10)),t.skillsTrainingFilter>-1&&this._filterItemData(t,"skills","training",parseInt(t.skillsTrainingFilter,10)),t.selectedSkill=this.selectedSkill,t.skillInfo="",!t.selectedSkill){e.next=11;break}return e.next=10,t.selectedSkill.getInfo();case 10:t.skillInfo=e.sent;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}})()},{key:"_abilityData",value:(function(){var e=(0,l.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._generateItemData(t,"ability","abilities"),t.abilityPoolFilter=this.abilityPoolFilter,t.abilityPoolFilter>-1&&this._filterItemData(t,"abilities","cost.pool",parseInt(t.abilityPoolFilter,10)),t.selectedAbility=this.selectedAbility,t.abilityInfo="",!t.selectedAbility){e.next=9;break}return e.next=8,t.selectedAbility.getInfo();case 8:t.abilityInfo=e.sent;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}})()},{key:"getData",value:(function(){var e=(0,l.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=(0,f.default)((0,p.default)(r.prototype),"getData",this).call(this)).isGM=game.user.isGM,t.ranges=h.CSR.ranges,t.stats=h.CSR.stats,t.weaponTypes=h.CSR.weaponTypes,t.weights=h.CSR.weightClasses,t.advances=Object.entries(t.actor.data.advances).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return{name:r,label:h.CSR.advances[r],isChecked:n}})),t.damageTrackData=h.CSR.damageTrack,t.damageTrackDescription=h.CSR.damageTrack[t.data.damageTrack].description,t.recoveriesData=Object.entries(t.actor.data.recoveries).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return{key:r,label:h.CSR.recoveries[r],checked:n}})),t.trainingLevels=h.CSR.trainingLevels,t.data.items=t.actor.items||{},e.next=14,this._skillData(t);case 14:return e.next=16,this._abilityData(t);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}})()},{key:"_createItem",value:function(e){var t={name:"New ".concat(e.capitalize()),type:e,data:new m.CypherSystemItem({})};this.actor.createOwnedItem(t,{renderSheet:!0})}},{key:"_rollPoolDialog",value:function(e){var t=this.actor,r=t.data.data,n=b.default[e];d.CypherRolls.Roll({event:event,parts:["1d20"],data:{pool:e,maxEffort:r.effort},speaker:ChatMessage.getSpeaker({actor:t}),flavor:"".concat(t.name," used ").concat(n),title:"Use Pool",actor:t})}},{key:"_deleteItemDialog",value:function(e,t){var r=this;new Dialog({title:game.i18n.localize("CSR.dialog.deleteTitle"),content:"<p>".concat(game.i18n.localize("CSR.dialog.deleteContent"),"</p><hr />"),buttons:{confirm:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CSR.dialog.deleteButton"),callback:function(){r.actor.deleteOwnedItem(e),t&&t(!0)}},cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CSR.dialog.cancelButton"),callback:function(){t&&t(!1)}}},default:"cancel"}).render(!0)}},{key:"_statsTabListeners",value:function(e){var t=this;e.find(".roll-pool").click((function(e){e.preventDefault();for(var r=e.target;!r.dataset.pool;)r=r.parentElement;var n=r.dataset.pool;t._rollPoolDialog(parseInt(n,10))})),e.find('select[name="data.damageTrack"]').select2({theme:"numenera",width:"130px",minimumResultsForSearch:1/0})}},{key:"_skillsTabListeners",value:function(e){var t=this;e.find(".add-skill").click((function(e){e.preventDefault(),t._createItem("skill")})),e.find('select[name="skillsPoolFilter"]').select2({theme:"numenera",width:"130px",minimumResultsForSearch:1/0}).on("change",(function(e){t.skillsPoolFilter=e.target.value})),e.find('select[name="skillsTrainingFilter"]').select2({theme:"numenera",width:"130px",minimumResultsForSearch:1/0}).on("change",(function(e){t.skillsTrainingFilter=e.target.value})),e.find("a.skill").on("click",(function(e){e.preventDefault(),t._onSubmit(e);for(var r=e.target;!r.dataset.id;)r=r.parentElement;var n=r.dataset.id,a=t.actor.getOwnedItem(n);t.selectedSkill=a}));var r=this.selectedSkill;r&&(e.find(".skill-info .actions .roll").click((function(e){e.preventDefault(),r.roll()})),e.find(".skill-info .actions .edit").click((function(e){e.preventDefault(),t.selectedSkill.sheet.render(!0)})),e.find(".skill-info .actions .delete").click((function(e){e.preventDefault(),t._deleteItemDialog(t.selectedSkill._id,(function(e){e&&(t.selectedSkill=null)}))})))}},{key:"_abilityTabListeners",value:function(e){var t=this;e.find(".add-ability").click((function(e){e.preventDefault(),t._createItem("ability")})),e.find('select[name="abilityPoolFilter"]').select2({theme:"numenera",width:"130px",minimumResultsForSearch:1/0}).on("change",(function(e){t.abilityPoolFilter=e.target.value})),e.find("a.ability").on("click",(function(e){e.preventDefault(),t._onSubmit(e);for(var r=e.target;!r.dataset.id;)r=r.parentElement;var n=r.dataset.id,a=t.actor.getOwnedItem(n);t.selectedAbility=a}));var r=this.selectedAbility;r&&(e.find(".ability-info .actions .roll").click((function(e){e.preventDefault(),r.roll()})),e.find(".ability-info .actions .edit").click((function(e){e.preventDefault(),t.selectedAbility.sheet.render(!0)})),e.find(".ability-info .actions .delete").click((function(e){e.preventDefault(),t._deleteItemDialog(t.selectedAbility._id,(function(e){e&&(t.selectedAbility=null)}))})))}},{key:"activateListeners",value:function(e){(0,f.default)((0,p.default)(r.prototype),"activateListeners",this).call(this,e),this.options.editable&&(e.find('.item[data-tab="stats"]').click((function(){var t=e.find(".stats-tabs .item.active").first(),r=e.find('.stats-body .tab[data-tab="'.concat(t.data("tab"),'"]'));setTimeout((function(){r.addClass("active")}),0)})),this._statsTabListeners(e),this._skillsTabListeners(e),this._abilityTabListeners(e))}}]),r})(ActorSheet);r.CypherSystemActorSheet=g},{"../config.js":3,"../enums/enum-pool.js":6,"../item/item.js":10,"../rolls.js":11,"../utils.js":13,"@babel/runtime/helpers/asyncToGenerator":17,"@babel/runtime/helpers/classCallCheck":18,"@babel/runtime/helpers/createClass":19,"@babel/runtime/helpers/get":20,"@babel/runtime/helpers/getPrototypeOf":21,"@babel/runtime/helpers/inherits":22,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/helpers/possibleConstructorReturn":26,"@babel/runtime/helpers/slicedToArray":28,"@babel/runtime/regenerator":33}],2:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.CypherSystemActor=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/get")),o=n(e("@babel/runtime/helpers/inherits")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),c=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("../enums/enum-pool.js"));function f(e){var t=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}})();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var p=(function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"_preparePCData",value:function(e){e.data}},{key:"prepareData",value:function(){(0,l.default)((0,c.default)(r.prototype),"prepareData",this).call(this);var e=this.data;e.data,e.flags;"pc"===e.type&&this._preparePCData(e)}},{key:"getSkillLevel",value:function(e){return e.data.data.training-1}},{key:"getEffortCostFromStat",value:function(e,t){var r={cost:0,effortLevel:0,warning:null};if(0===t)return r;var n=this.data.data,a=u.default[e],i=n.stats[a.toLowerCase()],l=(i.value+i.edge-1)/2,o=Math.min(t,n.effort,l),s=1+2*o-i.edge,c=null;return t>l&&(c="Not enough points in your ".concat(a," pool for that level of Effort")),r.cost=s,r.effortLevel=o,r.warning=c,r}},{key:"canSpendFromPool",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.data.data,a=u.default[e].toLowerCase(),i=n.stats[a],l=i.value;return(r?t-i.edge:t)<=l}},{key:"spendFromPool",value:function(e,t){if(!this.canSpendFromPool(e,t))return!1;var r=this.data.data,n=u.default[e],a=r.stats[n.toLowerCase()],i={};return i["data.stats.".concat(n.toLowerCase(),".value")]=Math.max(0,a.value-t),this.update(i),!0}}]),r})(Actor);r.CypherSystemActor=p},{"../enums/enum-pool.js":6,"@babel/runtime/helpers/classCallCheck":18,"@babel/runtime/helpers/createClass":19,"@babel/runtime/helpers/get":20,"@babel/runtime/helpers/getPrototypeOf":21,"@babel/runtime/helpers/inherits":22,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/helpers/possibleConstructorReturn":26}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CSR=void 0;var n={};r.CSR=n,n.itemTypes=["skills","abilities","cyphers","artifacts","oddities","weapons","armor","gear"],n.weightClasses=["Light","Medium","Heavy"],n.weaponTypes=["Bashing","Bladed","Ranged"],n.stats=["Might","Speed","Intellect"],n.trainingLevels=["Inability","Untrained","Trained","Specialized"],n.damageTrack=[{label:"Hale",description:"Normal state for a character."},{label:"Impaired",description:"In a wounded or injured state. Applying Effort costs 1 extra point per effort level applied."},{label:"Debilitated",description:"In a critically injured state. The character can do no other action than to crawl an immediate distance; if their Speed pool is 0, they cannot move at all."},{label:"Dead",description:"The character is dead."}],n.recoveries={action:"1 Action",tenMins:"10 mins",oneHour:"1 hour",tenHours:"10 hours"},n.advances={stats:"+4 to stat pools",edge:"+1 to Edge",effort:"+1 to Effort",skills:"Train/specialize skill",other:"Other"},n.ranges=["Immediate","Short","Long","Very Long"],n.optionalRanges=["N/A"].concat(n.ranges),n.abilityTypes=["Action","Enabler"],n.supportsMacros=["skill","ability"]},{}],4:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),a=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),l=e("./actor/actor.js"),o=e("./actor/actor-sheet.js"),s=e("./item/item.js"),c=e("./item/item-sheet.js"),u=e("./handlebars-helpers.js"),f=e("./template.js");Hooks.once("init",(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:game.cyphersystemClean={CypherSystemActor:l.CypherSystemActor,CypherSystemItem:s.CypherSystemItem},CONFIG.Combat.initiative={formula:"1d20",decimals:2},CONFIG.Actor.entityClass=l.CypherSystemActor,CONFIG.Item.entityClass=s.CypherSystemItem,Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("cyphersystemClean",o.CypherSystemActorSheet,{types:["pc"],makeDefault:!0}),Actors.registerSheet("cyphersystemClean",o.CypherSystemActorSheet,{types:["npc"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("cyphersystemClean",c.CypherSystemItemSheet,{makeDefault:!0}),(0,u.registerHandlebarHelpers)(),(0,f.preloadHandlebarsTemplates)();case 11:case"end":return e.stop()}}),e)}))))},{"./actor/actor-sheet.js":1,"./actor/actor.js":2,"./handlebars-helpers.js":8,"./item/item-sheet.js":9,"./item/item.js":10,"./template.js":12,"@babel/runtime/helpers/asyncToGenerator":17,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/regenerator":33}],5:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.RollDialog=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/get")),o=n(e("@babel/runtime/helpers/inherits")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),c=n(e("@babel/runtime/helpers/getPrototypeOf"));function u(e){var t=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}})();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var f=(function(e){(0,o.default)(r,e);var t=u(r);function r(e,n){return(0,a.default)(this,r),t.call(this,e,n)}return(0,i.default)(r,[{key:"activateListeners",value:function(e){(0,l.default)((0,c.default)(r.prototype),"activateListeners",this).call(this,e),e.find('select[name="rollMode"]').select2({theme:"numenera",width:"135px",minimumResultsForSearch:1/0})}}]),r})(Dialog);r.RollDialog=f},{"@babel/runtime/helpers/classCallCheck":18,"@babel/runtime/helpers/createClass":19,"@babel/runtime/helpers/get":20,"@babel/runtime/helpers/getPrototypeOf":21,"@babel/runtime/helpers/inherits":22,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/helpers/possibleConstructorReturn":26}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=["Might","Speed","Intellect"];r.default=n},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=["Inability","Untrained","Trained","Specialized"];r.default=n},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerHandlebarHelpers=void 0;r.registerHandlebarHelpers=function(){Handlebars.registerHelper("toLowerCase",(function(e){return e.toLowerCase()})),Handlebars.registerHelper("toUpperCase",(function(e){return e.toUpperCase()})),Handlebars.registerHelper("eq",(function(e,t){return e===t})),Handlebars.registerHelper("neq",(function(e,t){return e!==t})),Handlebars.registerHelper("or",(function(e,t){return e||t})),Handlebars.registerHelper("ternary",(function(e,t,r){return e?t:r})),Handlebars.registerHelper("concat",(function(e,t){return"".concat(e).concat(t)})),Handlebars.registerHelper("strOrSpace",(function(e){return"string"==typeof e?e&&e.length?e:"&nbsp;":e})),Handlebars.registerHelper("trainingIcon",(function(e){switch(e){case 0:return'<span title="'.concat(game.i18n.localize("CSR.training.inability"),'">[I]</span>');case 1:return'<span title="'.concat(game.i18n.localize("CSR.training.untrained"),'">[U]</span>');case 2:return'<span title="'.concat(game.i18n.localize("CSR.training.trained"),'">[T]</span>');case 3:return'<span title="'.concat(game.i18n.localize("CSR.training.specialized"),'">[S]</span>')}return""})),Handlebars.registerHelper("poolIcon",(function(e){switch(e){case 0:return'<span title="'.concat(game.i18n.localize("CSR.pool.might"),'">[M]</span>');case 1:return'<span title="'.concat(game.i18n.localize("CSR.pool.speed"),'">[S]</span>');case 2:return'<span title="'.concat(game.i18n.localize("CSR.pool.intellect"),'">[I]</span>')}return""}))}},{}],9:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.CypherSystemItemSheet=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/get")),o=n(e("@babel/runtime/helpers/inherits")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),c=n(e("@babel/runtime/helpers/getPrototypeOf")),u=e("../config.js");function f(e){var t=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}})();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var p=(function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"_skillData",value:function(e){e.stats=u.CSR.stats,e.trainingLevels=u.CSR.trainingLevels}},{key:"_abilityData",value:function(e){e.data.ranges=u.CSR.optionalRanges,e.data.stats=u.CSR.stats}},{key:"getData",value:function(){var e=(0,l.default)((0,c.default)(r.prototype),"getData",this).call(this);switch(this.item.data.type){case"skill":this._skillData(e);break;case"ability":this._abilityData(e)}return e}},{key:"setPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.default)((0,c.default)(r.prototype),"setPosition",this).call(this,e),n=this.element.find(".sheet-body"),a=t.height-192;return n.css("height",a),t}},{key:"_skillListeners",value:function(e){e.closest(".window-app.sheet.item").addClass("skill-window"),e.find('select[name="data.stat"]').select2({theme:"numenera",width:"110px",minimumResultsForSearch:1/0}),e.find('select[name="data.training"]').select2({theme:"numenera",width:"110px",minimumResultsForSearch:1/0})}},{key:"_abilityListeners",value:function(e){var t=this;e.closest(".window-app.sheet.item").addClass("ability-window"),e.find('select[name="data.isEnabler"]').select2({theme:"numenera",width:"220px",minimumResultsForSearch:1/0}),e.find('select[name="data.cost.pool"]').select2({theme:"numenera",width:"85px",minimumResultsForSearch:1/0}),e.find('select[name="data.range"]').select2({theme:"numenera",width:"120px",minimumResultsForSearch:1/0}),e.find("#cb-identified").on("change",(function(e){e.preventDefault(),e.stopPropagation(),t.item.update({"data.identified":e.target.checked})}))}},{key:"activateListeners",value:function(e){if((0,l.default)((0,c.default)(r.prototype),"activateListeners",this).call(this,e),this.options.editable)switch(this.item.data.type){case"skill":this._skillListeners(e);break;case"ability":this._abilityListeners(e)}}},{key:"template",get:function(){return"".concat("systems/cyphersystemClean/templates/item","/").concat(this.item.data.type,"-sheet.html")}}],[{key:"defaultOptions",get:function(){return mergeObject((0,l.default)((0,c.default)(r),"defaultOptions",this),{classes:["cyphersystem","sheet","item"],width:500,height:500,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"description"}]})}}]),r})(ItemSheet);r.CypherSystemItemSheet=p},{"../config.js":3,"@babel/runtime/helpers/classCallCheck":18,"@babel/runtime/helpers/createClass":19,"@babel/runtime/helpers/get":20,"@babel/runtime/helpers/getPrototypeOf":21,"@babel/runtime/helpers/inherits":22,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/helpers/possibleConstructorReturn":26}],10:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.CypherSystemItem=void 0;var a=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),l=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),f=n(e("@babel/runtime/helpers/getPrototypeOf")),p=e("../rolls.js"),h=n(e("../enums/enum-pool.js")),d=n(e("../enums/enum-training.js"));function m(e){var t=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}})();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var y=(function(e){(0,c.default)(r,e);var t=m(r);function r(){return(0,l.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"_prepareSkillData",value:function(){this.data.data}},{key:"prepareData",value:function(){(0,s.default)((0,f.default)(r.prototype),"prepareData",this).call(this),"skill"===this.type&&this._prepareSkillData()}},{key:"_skillRoll",value:function(){var e=this.actor,t=e.data.data,r=this.name,n=this.data.data.pool,a=e.getSkillLevel(this),i=["1d20"];if(0!==a){var l=a<0?"-":"+";i.push("".concat(l," ").concat(3*Math.abs(a)))}p.CypherRolls.Roll({event:event,parts:i,data:{pool:n,abilityCost:0,maxEffort:t.effort,assets:a},speaker:ChatMessage.getSpeaker({actor:e}),flavor:"".concat(e.name," used ").concat(r),title:"Use Skill",actor:e})}},{key:"_abilityRoll",value:function(){var e=this.actor,t=e.data.data,r=this.name,n=this.data.data,a=n.isEnabler,i=n.cost;if(a)ChatMessage.create([{speaker:ChatMessage.getSpeaker({actor:e}),flavor:"Invalid Ability",content:"This ability is an Enabler and cannot be rolled for."}]);else{var l=i.pool;if(e.canSpendFromPool(l,parseInt(i.amount,10)))p.CypherRolls.Roll({event:event,parts:["1d20"],data:{pool:l,abilityCost:i.amount,maxEffort:t.effort},speaker:ChatMessage.getSpeaker({actor:e}),flavor:"".concat(e.name," used ").concat(r),title:"Use Ability",actor:e});else{var o=h.default[l];ChatMessage.create([{speaker:ChatMessage.getSpeaker({actor:e}),flavor:"Ability Failed",content:"Not enough points in ".concat(o," pool.")}])}}}},{key:"roll",value:function(){switch(this.type){case"skill":this._skillRoll();break;case"ability":this._abilityRoll()}}},{key:"_skillInfo",value:(function(){var e=(0,i.default)(a.default.mark((function e(){var t,r,n,i,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.data,r=d.default[t.data.training],n=h.default[t.data.pool],i={name:t.name,training:r.toLowerCase(),pool:n.toLowerCase(),notes:t.data.notes},e.next=6,renderTemplate("systems/cyphersystemClean/templates/actor/partials/info/skill-info.html",i);case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}})()},{key:"_abilityInfo",value:(function(){var e=(0,i.default)(a.default.mark((function e(){var t,r,n,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.data,r=h.default[t.data.cost.pool],n={name:t.name,pool:r.toLowerCase(),isEnabler:t.data.isEnabler,notes:t.data.notes},e.next=5,renderTemplate("systems/cyphersystemClean/templates/actor/partials/info/ability-info.html",n);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}})()},{key:"getInfo",value:(function(){var e=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="",e.t0=this.type,e.next="skill"===e.t0?4:"ability"===e.t0?8:12;break;case 4:return e.next=6,this._skillInfo();case 6:return t=e.sent,e.abrupt("break",12);case 8:return e.next=10,this._abilityInfo();case 10:return t=e.sent,e.abrupt("break",12);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}})()}]),r})(Item);r.CypherSystemItem=y},{"../enums/enum-pool.js":6,"../enums/enum-training.js":7,"../rolls.js":11,"@babel/runtime/helpers/asyncToGenerator":17,"@babel/runtime/helpers/classCallCheck":18,"@babel/runtime/helpers/createClass":19,"@babel/runtime/helpers/get":20,"@babel/runtime/helpers/getPrototypeOf":21,"@babel/runtime/helpers/inherits":22,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/helpers/possibleConstructorReturn":26,"@babel/runtime/regenerator":33}],11:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.CypherRolls=void 0;var a=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),l=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("./dialog/roll-dialog.js"),c=n(e("./enums/enum-pool.js")),u=(function(){function e(){(0,l.default)(this,e)}return(0,o.default)(e,null,[{key:"Roll",value:(function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((0,i.default)(a.default.mark((function e(){var t,r,n,i,l,o,u,f,p,h,d,m,y,b,v,g,k,C,S,w,R,x,_,D=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D.length>0&&void 0!==D[0]?D[0]:{},r=t.parts,n=void 0===r?[]:r,i=t.data,l=void 0===i?{}:i,o=t.actor,u=void 0===o?null:o,f=t.event,void 0===f?null:f,p=t.speaker,h=void 0===p?null:p,d=t.flavor,m=void 0===d?null:d,y=t.title,b=void 0===y?null:y,v=t.item,void 0!==v&&v,g=game.settings.get("core","rollMode"),k=!1,C=n.filter((function(e){return""!=e&&e})),S=1,l.maxEffort&&(S=parseInt(l.maxEffort,10)||1),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&(l.effort=parseInt(e.effort.value,10)),l.effort&&(C.push("+".concat(3*l.effort)),m+=" with ".concat(l.effort," Effort"));var t=new Roll(C.join(""),l).roll();return g=e?e.rollMode.value:g,k=!0,t},"systems/cyphersystemClean/templates/dialog/roll-dialog.html",R={formula:C.join(" "),maxEffort:S,data:l,rollMode:g,rollModes:CONFIG.Dice.rollModes},e.next=11,renderTemplate("systems/cyphersystemClean/templates/dialog/roll-dialog.html",R);case 11:return x=e.sent,e.abrupt("return",new Promise(function(e){new s.RollDialog({title:b,content:x,buttons:{ok:{label:"OK",icon:'<i class="fas fa-check"></i>',callback:function(e){_=w(e[0].children[0]);var t=l.pool,r=parseInt(l.effort||0,10),n=u.getEffortCostFromStat(t,r),a=parseInt(l.abilityCost||0,10)+parseInt(n.cost,10);if(u.canSpendFromPool(t,a)&&!n.warning)_.toMessage({speaker:h,flavor:m},{rollMode:g}),u.spendFromPool(t,a);else{var i=c.default[t];ChatMessage.create([{speaker:h,flavor:"Roll Failed",content:"Not enough points in ".concat(i," pool.")}])}}},cancel:{icon:'<i class="fas fa-times"></i>',label:"Cancel"}},default:"ok",close:function(){e(!!k&&_)}}).render(!0)}));case 13:case"end":return e.stop()}}),e)}))))}]),e})();r.CypherRolls=u},{"./dialog/roll-dialog.js":5,"./enums/enum-pool.js":6,"@babel/runtime/helpers/asyncToGenerator":17,"@babel/runtime/helpers/classCallCheck":18,"@babel/runtime/helpers/createClass":19,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/regenerator":33}],12:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.preloadHandlebarsTemplates=void 0;var a=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),l=(function(){var e=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["systems/cyphersystemClean/templates/actor/actor-sheet.html","systems/cyphersystemClean/templates/actor/pc-sheet.html","systems/cyphersystemClean/templates/actor/partials/pools.html","systems/cyphersystemClean/templates/actor/partials/advancement.html","systems/cyphersystemClean/templates/actor/partials/damage-track.html","systems/cyphersystemClean/templates/actor/partials/recovery.html","systems/cyphersystemClean/templates/actor/partials/skills.html","systems/cyphersystemClean/templates/actor/partials/abilities.html","systems/cyphersystemClean/templates/actor/partials/info/skill-info.html","systems/cyphersystemClean/templates/actor/partials/info/ability-info.html","systems/cyphersystemClean/templates/item/item-sheet.html","systems/cyphersystemClean/templates/item/skill-sheet.html"],e.abrupt("return",loadTemplates(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})();r.preloadHandlebarsTemplates=l},{"@babel/runtime/helpers/asyncToGenerator":17,"@babel/runtime/helpers/interopRequireDefault":23,"@babel/runtime/regenerator":33}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deepProp=function(e,t){var r=t.split("."),n=e;return r.forEach((function(e){e in n&&(n=n[e])})),n}},{}],14:[function(e,t,r){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},{}],15:[function(e,t,r){t.exports=function(e){if(Array.isArray(e))return e}},{}],16:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],17:[function(e,t,r){function n(e,t,r,n,a,i,l){try{var o=e[i](l),s=o.value}catch(e){return void r(e)}o.done?t(s):Promise.resolve(s).then(n,a)}t.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(a,i){var l=e.apply(t,r);function o(e){n(l,a,i,o,s,"next",e)}function s(e){n(l,a,i,o,s,"throw",e)}o(void 0)})}}},{}],18:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],19:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],20:[function(e,t,r){var n=e("./superPropBase");function a(e,r,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=a=Reflect.get:t.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(e,r,i||e)}t.exports=a},{"./superPropBase":29}],21:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],22:[function(e,t,r){var n=e("./setPrototypeOf");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{"./setPrototypeOf":27}],23:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],24:[function(e,t,r){t.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}}},{}],25:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},{}],26:[function(e,t,r){var n=e("../helpers/typeof"),a=e("./assertThisInitialized");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},{"../helpers/typeof":30,"./assertThisInitialized":16}],27:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,r)}t.exports=n},{}],28:[function(e,t,r){var n=e("./arrayWithHoles"),a=e("./iterableToArrayLimit"),i=e("./unsupportedIterableToArray"),l=e("./nonIterableRest");t.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||l()}},{"./arrayWithHoles":15,"./iterableToArrayLimit":24,"./nonIterableRest":25,"./unsupportedIterableToArray":31}],29:[function(e,t,r){var n=e("./getPrototypeOf");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{"./getPrototypeOf":21}],30:[function(e,t,r){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n},{}],31:[function(e,t,r){var n=e("./arrayLikeToArray");t.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},{"./arrayLikeToArray":14}],32:[function(e,t,r){var n=(function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),l=new D(n||[]);return i._invoke=(function(e,t,r){var n=u;return function(a,i){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw i;return j()}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var o=R(l,r);if(o){if(o===d)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=c(e,t,r);if("normal"===s.type){if(n=r.done?h:f,s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=h,r.method="throw",r.arg=s.arg)}}})(e,r,l),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u="suspendedStart",f="suspendedYield",p="executing",h="completed",d={};function m(){}function y(){}function b(){}var v={};v[i]=function(){return this};var g=Object.getPrototypeOf,k=g&&g(g(I([])));k&&k!==r&&n.call(k,i)&&(v=k);var C=b.prototype=m.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e,t){var r;this._invoke=function(a,i){function l(){return new t(function(r,l){!(function r(a,i,l,o){var s=c(e[a],e,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,l,o)}),(function(e){r("throw",e,l,o)})):t.resolve(f).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,o)}))}o(s.arg)})(a,i,r,l)})}return r=r?r.then(l,l):l()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=c(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,d;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,l=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return l.next=l}}return{next:j}}function j(){return{value:t,done:!0}}return y.prototype=C.constructor=b,b.constructor=y,b[o]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},S(w.prototype),w.prototype[l]=function(){return this},e.AsyncIterator=w,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var l=new w(s(t,r,n,a),i);return e.isGeneratorFunction(r)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},S(C),C[o]="Generator",C[i]=function(){return this},C.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return o.type="throw",o.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],o=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var s=n.call(l,"catchLoc"),c=n.call(l,"finallyLoc");if(s&&c){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var l=i?i.completion:{};return l.type=e,l.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e})("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},{}],33:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":32}]},{},[4]);